"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.commands = void 0;
require("source-map-support/register");
var _support = require("appium/support");
let extensions = {},
  commands = {};

exports.commands = commands;
commands.getStatusBarHeight = async function () {
  const {
    statusBar
  } = await this.uiautomator2.jwproxy.command(`/appium/device/system_bars`, 'GET', {});
  return statusBar;
};

commands.getDevicePixelRatio = async function () {
  return await this.uiautomator2.jwproxy.command('/appium/device/pixel_ratio', 'GET', {});
};
commands.getViewportScreenshot = async function () {
  const screenshot = await this.getScreenshot();
  const rect = await this.getViewPortRect();
  return await _support.imageUtil.cropBase64Image(screenshot, rect);
};
commands.getViewPortRect = async function () {
  const windowSize = await this.getWindowSize();
  const statusBarHeight = await this.getStatusBarHeight();
  return {
    left: 0,
    top: statusBarHeight,
    width: windowSize.width,
    height: windowSize.height - statusBarHeight
  };
};
Object.assign(extensions, commands);
var _default = extensions;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJleHRlbnNpb25zIiwiY29tbWFuZHMiLCJnZXRTdGF0dXNCYXJIZWlnaHQiLCJzdGF0dXNCYXIiLCJ1aWF1dG9tYXRvcjIiLCJqd3Byb3h5IiwiY29tbWFuZCIsImdldERldmljZVBpeGVsUmF0aW8iLCJnZXRWaWV3cG9ydFNjcmVlbnNob3QiLCJzY3JlZW5zaG90IiwiZ2V0U2NyZWVuc2hvdCIsInJlY3QiLCJnZXRWaWV3UG9ydFJlY3QiLCJpbWFnZVV0aWwiLCJjcm9wQmFzZTY0SW1hZ2UiLCJ3aW5kb3dTaXplIiwiZ2V0V2luZG93U2l6ZSIsInN0YXR1c0JhckhlaWdodCIsImxlZnQiLCJ0b3AiLCJ3aWR0aCIsImhlaWdodCIsIk9iamVjdCIsImFzc2lnbiJdLCJzb3VyY2VzIjpbIi4uLy4uLy4uL2xpYi9jb21tYW5kcy92aWV3cG9ydC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBpbWFnZVV0aWwgfSBmcm9tICdhcHBpdW0vc3VwcG9ydCc7XG5cblxubGV0IGV4dGVuc2lvbnMgPSB7fSwgY29tbWFuZHMgPSB7fTtcblxuLy8gbWVtb2l6ZWQgaW4gY29uc3RydWN0b3JcbmNvbW1hbmRzLmdldFN0YXR1c0JhckhlaWdodCA9IGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qge3N0YXR1c0Jhcn0gPSBhd2FpdCB0aGlzLnVpYXV0b21hdG9yMi5qd3Byb3h5LmNvbW1hbmQoYC9hcHBpdW0vZGV2aWNlL3N5c3RlbV9iYXJzYCwgJ0dFVCcsIHt9KTtcbiAgcmV0dXJuIHN0YXR1c0Jhcjtcbn07XG5cbi8vIG1lbW9pemVkIGluIGNvbnN0cnVjdG9yXG5jb21tYW5kcy5nZXREZXZpY2VQaXhlbFJhdGlvID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gYXdhaXQgdGhpcy51aWF1dG9tYXRvcjIuandwcm94eS5jb21tYW5kKCcvYXBwaXVtL2RldmljZS9waXhlbF9yYXRpbycsICdHRVQnLCB7fSk7XG59O1xuXG5jb21tYW5kcy5nZXRWaWV3cG9ydFNjcmVlbnNob3QgPSBhc3luYyBmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHNjcmVlbnNob3QgPSBhd2FpdCB0aGlzLmdldFNjcmVlbnNob3QoKTtcbiAgY29uc3QgcmVjdCA9IGF3YWl0IHRoaXMuZ2V0Vmlld1BvcnRSZWN0KCk7XG4gIHJldHVybiBhd2FpdCBpbWFnZVV0aWwuY3JvcEJhc2U2NEltYWdlKHNjcmVlbnNob3QsIHJlY3QpO1xufTtcblxuY29tbWFuZHMuZ2V0Vmlld1BvcnRSZWN0ID0gYXN5bmMgZnVuY3Rpb24gKCkge1xuICBjb25zdCB3aW5kb3dTaXplID0gYXdhaXQgdGhpcy5nZXRXaW5kb3dTaXplKCk7XG4gIGNvbnN0IHN0YXR1c0JhckhlaWdodCA9IGF3YWl0IHRoaXMuZ2V0U3RhdHVzQmFySGVpZ2h0KCk7XG4gIC8vIGFuZHJvaWQgcmV0dXJucyB0aGUgdXBzY2FsZWQgd2luZG93IHNpemUsIHNvIHRvIGdldCB0aGUgdHJ1ZSBzaXplIG9mIHRoZVxuICAvLyByZWN0IHdlIGhhdmUgdG8gZG93bnNjYWxlXG4gIHJldHVybiB7XG4gICAgbGVmdDogMCxcbiAgICB0b3A6IHN0YXR1c0JhckhlaWdodCxcbiAgICB3aWR0aDogd2luZG93U2l6ZS53aWR0aCxcbiAgICBoZWlnaHQ6IHdpbmRvd1NpemUuaGVpZ2h0IC0gc3RhdHVzQmFySGVpZ2h0XG4gIH07XG59O1xuXG5PYmplY3QuYXNzaWduKGV4dGVuc2lvbnMsIGNvbW1hbmRzKTtcbmV4cG9ydCB7IGNvbW1hbmRzIH07XG5leHBvcnQgZGVmYXVsdCBleHRlbnNpb25zO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUE7QUFHQSxJQUFJQSxVQUFVLEdBQUcsQ0FBQyxDQUFDO0VBQUVDLFFBQVEsR0FBRyxDQUFDLENBQUM7O0FBQUM7QUFHbkNBLFFBQVEsQ0FBQ0Msa0JBQWtCLEdBQUcsa0JBQWtCO0VBQzlDLE1BQU07SUFBQ0M7RUFBUyxDQUFDLEdBQUcsTUFBTSxJQUFJLENBQUNDLFlBQVksQ0FBQ0MsT0FBTyxDQUFDQyxPQUFPLENBQUUsNEJBQTJCLEVBQUUsS0FBSyxFQUFFLENBQUMsQ0FBQyxDQUFDO0VBQ3BHLE9BQU9ILFNBQVM7QUFDbEIsQ0FBQzs7QUFHREYsUUFBUSxDQUFDTSxtQkFBbUIsR0FBRyxrQkFBa0I7RUFDL0MsT0FBTyxNQUFNLElBQUksQ0FBQ0gsWUFBWSxDQUFDQyxPQUFPLENBQUNDLE9BQU8sQ0FBQyw0QkFBNEIsRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDekYsQ0FBQztBQUVETCxRQUFRLENBQUNPLHFCQUFxQixHQUFHLGtCQUFrQjtFQUNqRCxNQUFNQyxVQUFVLEdBQUcsTUFBTSxJQUFJLENBQUNDLGFBQWEsRUFBRTtFQUM3QyxNQUFNQyxJQUFJLEdBQUcsTUFBTSxJQUFJLENBQUNDLGVBQWUsRUFBRTtFQUN6QyxPQUFPLE1BQU1DLGtCQUFTLENBQUNDLGVBQWUsQ0FBQ0wsVUFBVSxFQUFFRSxJQUFJLENBQUM7QUFDMUQsQ0FBQztBQUVEVixRQUFRLENBQUNXLGVBQWUsR0FBRyxrQkFBa0I7RUFDM0MsTUFBTUcsVUFBVSxHQUFHLE1BQU0sSUFBSSxDQUFDQyxhQUFhLEVBQUU7RUFDN0MsTUFBTUMsZUFBZSxHQUFHLE1BQU0sSUFBSSxDQUFDZixrQkFBa0IsRUFBRTtFQUd2RCxPQUFPO0lBQ0xnQixJQUFJLEVBQUUsQ0FBQztJQUNQQyxHQUFHLEVBQUVGLGVBQWU7SUFDcEJHLEtBQUssRUFBRUwsVUFBVSxDQUFDSyxLQUFLO0lBQ3ZCQyxNQUFNLEVBQUVOLFVBQVUsQ0FBQ00sTUFBTSxHQUFHSjtFQUM5QixDQUFDO0FBQ0gsQ0FBQztBQUVESyxNQUFNLENBQUNDLE1BQU0sQ0FBQ3ZCLFVBQVUsRUFBRUMsUUFBUSxDQUFDO0FBQUMsZUFFckJELFVBQVU7QUFBQSJ9